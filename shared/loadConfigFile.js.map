{"version":3,"file":"loadConfigFile.js","sources":["../../node_modules/colorette/index.js","../../src/utils/colors.ts","../../cli/logging.ts","../../cli/run/batchWarnings.ts","../../cli/run/stdin.ts","../../cli/run/waitForInput.ts","../../cli/run/commandPlugins.ts","../../cli/run/loadConfigFile.ts"],"sourcesContent":["import * as tty from \"tty\"\n\nconst env = process.env || {}\nconst argv = process.argv || []\n\nconst isDisabled = \"NO_COLOR\" in env || argv.includes(\"--no-color\")\nconst isForced = \"FORCE_COLOR\" in env || argv.includes(\"--color\")\nconst isWindows = process.platform === \"win32\"\n\nconst isCompatibleTerminal =\n  tty && tty.isatty && tty.isatty(1) && env.TERM && env.TERM !== \"dumb\"\n\nconst isCI =\n  \"CI\" in env &&\n  (\"GITHUB_ACTIONS\" in env || \"GITLAB_CI\" in env || \"CIRCLECI\" in env)\n\nexport const isColorSupported =\n  !isDisabled && (isForced || isWindows || isCompatibleTerminal || isCI)\n\nconst replaceClose = (\n  index,\n  string,\n  close,\n  replace,\n  head = string.substring(0, index) + replace,\n  tail = string.substring(index + close.length),\n  next = tail.indexOf(close)\n) => head + (next < 0 ? tail : replaceClose(next, tail, close, replace))\n\nconst clearBleed = (index, string, open, close, replace) =>\n  index < 0\n    ? open + string + close\n    : open + replaceClose(index, string, close, replace) + close\n\nconst filterEmpty =\n  (open, close, replace = open, at = open.length + 1) =>\n  (string) =>\n    string || !(string === \"\" || string === undefined)\n      ? clearBleed(\n          (\"\" + string).indexOf(close, at),\n          string,\n          open,\n          close,\n          replace\n        )\n      : \"\"\n\nconst init = (open, close, replace) =>\n  filterEmpty(`\\x1b[${open}m`, `\\x1b[${close}m`, replace)\n\nconst colors = {\n  reset: init(0, 0),\n  bold: init(1, 22, \"\\x1b[22m\\x1b[1m\"),\n  dim: init(2, 22, \"\\x1b[22m\\x1b[2m\"),\n  italic: init(3, 23),\n  underline: init(4, 24),\n  inverse: init(7, 27),\n  hidden: init(8, 28),\n  strikethrough: init(9, 29),\n  black: init(30, 39),\n  red: init(31, 39),\n  green: init(32, 39),\n  yellow: init(33, 39),\n  blue: init(34, 39),\n  magenta: init(35, 39),\n  cyan: init(36, 39),\n  white: init(37, 39),\n  gray: init(90, 39),\n  bgBlack: init(40, 49),\n  bgRed: init(41, 49),\n  bgGreen: init(42, 49),\n  bgYellow: init(43, 49),\n  bgBlue: init(44, 49),\n  bgMagenta: init(45, 49),\n  bgCyan: init(46, 49),\n  bgWhite: init(47, 49),\n  blackBright: init(90, 39),\n  redBright: init(91, 39),\n  greenBright: init(92, 39),\n  yellowBright: init(93, 39),\n  blueBright: init(94, 39),\n  magentaBright: init(95, 39),\n  cyanBright: init(96, 39),\n  whiteBright: init(97, 39),\n  bgBlackBright: init(100, 49),\n  bgRedBright: init(101, 49),\n  bgGreenBright: init(102, 49),\n  bgYellowBright: init(103, 49),\n  bgBlueBright: init(104, 49),\n  bgMagentaBright: init(105, 49),\n  bgCyanBright: init(106, 49),\n  bgWhiteBright: init(107, 49),\n}\n\nconst none = (any) => any\n\nexport const createColors = ({ useColor = isColorSupported } = {}) =>\n  useColor\n    ? colors\n    : Object.keys(colors).reduce(\n        (colors, key) => ({ ...colors, [key]: none }),\n        {}\n      )\n\nexport const {\n  reset,\n  bold,\n  dim,\n  italic,\n  underline,\n  inverse,\n  hidden,\n  strikethrough,\n  black,\n  red,\n  green,\n  yellow,\n  blue,\n  magenta,\n  cyan,\n  white,\n  gray,\n  bgBlack,\n  bgRed,\n  bgGreen,\n  bgYellow,\n  bgBlue,\n  bgMagenta,\n  bgCyan,\n  bgWhite,\n  blackBright,\n  redBright,\n  greenBright,\n  yellowBright,\n  blueBright,\n  magentaBright,\n  cyanBright,\n  whiteBright,\n  bgBlackBright,\n  bgRedBright,\n  bgGreenBright,\n  bgYellowBright,\n  bgBlueBright,\n  bgMagentaBright,\n  bgCyanBright,\n  bgWhiteBright,\n} = createColors()\n","import { env } from 'process';\nimport { createColors } from 'colorette';\n\n// @see https://no-color.org\n// @see https://www.npmjs.com/package/chalk\nexport const { bold, cyan, dim, gray, green, red, underline, yellow } = createColors({\n\tuseColor: env.FORCE_COLOR !== '0' && !env.NO_COLOR\n});\n","import process from 'process';\nimport type { RollupError } from '../src/rollup/types';\nimport { bold, cyan, dim, red } from '../src/utils/colors';\nimport relativeId from '../src/utils/relativeId';\n\n// log to stderr to keep `rollup main.js > bundle.js` from breaking\nexport const stderr = (...args: readonly unknown[]) => process.stderr.write(`${args.join('')}\\n`);\n\nexport function handleError(err: RollupError, recover = false): void {\n\tlet description = err.message || err;\n\tif (err.name) description = `${err.name}: ${description}`;\n\tconst message = (err.plugin ? `(plugin ${err.plugin}) ${description}` : description) || err;\n\n\tstderr(bold(red(`[!] ${bold(message.toString())}`)));\n\n\tif (err.url) {\n\t\tstderr(cyan(err.url));\n\t}\n\n\tif (err.loc) {\n\t\tstderr(`${relativeId((err.loc.file || err.id)!)} (${err.loc.line}:${err.loc.column})`);\n\t} else if (err.id) {\n\t\tstderr(relativeId(err.id));\n\t}\n\n\tif (err.frame) {\n\t\tstderr(dim(err.frame));\n\t}\n\n\tif (err.stack) {\n\t\tstderr(dim(err.stack));\n\t}\n\n\tstderr('');\n\n\tif (!recover) process.exit(1);\n}\n","import type { RollupWarning } from '../../src/rollup/types';\nimport { bold, gray, yellow } from '../../src/utils/colors';\nimport { getOrCreate } from '../../src/utils/getOrCreate';\nimport { printQuotedStringList } from '../../src/utils/printStringList';\nimport relativeId from '../../src/utils/relativeId';\nimport { stderr } from '../logging';\n\nexport interface BatchWarnings {\n\tadd: (warning: RollupWarning) => void;\n\treadonly count: number;\n\tflush: () => void;\n\treadonly warningOccurred: boolean;\n}\n\nexport default function batchWarnings(): BatchWarnings {\n\tlet count = 0;\n\tlet deferredWarnings = new Map<keyof typeof deferredHandlers, RollupWarning[]>();\n\tlet warningOccurred = false;\n\n\treturn {\n\t\tadd: (warning: RollupWarning) => {\n\t\t\tcount += 1;\n\t\t\twarningOccurred = true;\n\n\t\t\tif (warning.code! in deferredHandlers) {\n\t\t\t\tgetOrCreate(deferredWarnings, warning.code!, () => []).push(warning);\n\t\t\t} else if (warning.code! in immediateHandlers) {\n\t\t\t\timmediateHandlers[warning.code!](warning);\n\t\t\t} else {\n\t\t\t\ttitle(warning.message);\n\n\t\t\t\tif (warning.url) info(warning.url);\n\n\t\t\t\tconst id = (warning.loc && warning.loc.file) || warning.id;\n\t\t\t\tif (id) {\n\t\t\t\t\tconst loc = warning.loc\n\t\t\t\t\t\t? `${relativeId(id)} (${warning.loc.line}:${warning.loc.column})`\n\t\t\t\t\t\t: relativeId(id);\n\n\t\t\t\t\tstderr(bold(relativeId(loc)));\n\t\t\t\t}\n\n\t\t\t\tif (warning.frame) info(warning.frame);\n\t\t\t}\n\t\t},\n\n\t\tget count() {\n\t\t\treturn count;\n\t\t},\n\n\t\tflush: () => {\n\t\t\tif (count === 0) return;\n\n\t\t\tconst codes = Array.from(deferredWarnings.keys()).sort(\n\t\t\t\t(a, b) => deferredWarnings.get(b)!.length - deferredWarnings.get(a)!.length\n\t\t\t);\n\n\t\t\tfor (const code of codes) {\n\t\t\t\tdeferredHandlers[code](deferredWarnings.get(code)!);\n\t\t\t}\n\n\t\t\tdeferredWarnings = new Map();\n\t\t\tcount = 0;\n\t\t},\n\n\t\tget warningOccurred() {\n\t\t\treturn warningOccurred;\n\t\t}\n\t};\n}\n\nconst immediateHandlers: {\n\t[code: string]: (warning: RollupWarning) => void;\n} = {\n\tMISSING_NODE_BUILTINS: warning => {\n\t\ttitle(`Missing shims for Node.js built-ins`);\n\n\t\tstderr(\n\t\t\t`Creating a browser bundle that depends on ${printQuotedStringList(\n\t\t\t\twarning.modules!\n\t\t\t)}. You might need to include https://github.com/snowpackjs/rollup-plugin-polyfill-node`\n\t\t);\n\t},\n\n\tUNKNOWN_OPTION: warning => {\n\t\ttitle(`You have passed an unrecognized option`);\n\t\tstderr(warning.message);\n\t}\n};\n\nconst deferredHandlers: {\n\t[code: string]: (warnings: RollupWarning[]) => void;\n} = {\n\tCIRCULAR_DEPENDENCY(warnings) {\n\t\ttitle(`Circular dependenc${warnings.length > 1 ? 'ies' : 'y'}`);\n\t\tconst displayed = warnings.length > 5 ? warnings.slice(0, 3) : warnings;\n\t\tfor (const warning of displayed) {\n\t\t\tstderr(warning.cycle!.join(' -> '));\n\t\t}\n\t\tif (warnings.length > displayed.length) {\n\t\t\tstderr(`...and ${warnings.length - displayed.length} more`);\n\t\t}\n\t},\n\n\tEMPTY_BUNDLE(warnings) {\n\t\ttitle(\n\t\t\t`Generated${warnings.length === 1 ? ' an' : ''} empty ${\n\t\t\t\twarnings.length > 1 ? 'chunks' : 'chunk'\n\t\t\t}`\n\t\t);\n\t\tstderr(warnings.map(warning => warning.chunkName!).join(', '));\n\t},\n\n\tEVAL(warnings) {\n\t\ttitle('Use of eval is strongly discouraged');\n\t\tinfo('https://rollupjs.org/guide/en/#avoiding-eval');\n\t\tshowTruncatedWarnings(warnings);\n\t},\n\n\tMISSING_EXPORT(warnings) {\n\t\ttitle('Missing exports');\n\t\tinfo('https://rollupjs.org/guide/en/#error-name-is-not-exported-by-module');\n\n\t\tfor (const warning of warnings) {\n\t\t\tstderr(bold(warning.importer!));\n\t\t\tstderr(`${warning.missing} is not exported by ${warning.exporter}`);\n\t\t\tstderr(gray(warning.frame!));\n\t\t}\n\t},\n\n\tMISSING_GLOBAL_NAME(warnings) {\n\t\ttitle(`Missing global variable ${warnings.length > 1 ? 'names' : 'name'}`);\n\t\tstderr(\n\t\t\t`Use output.globals to specify browser global variable names corresponding to external modules`\n\t\t);\n\t\tfor (const warning of warnings) {\n\t\t\tstderr(`${bold(warning.source!)} (guessing '${warning.guess}')`);\n\t\t}\n\t},\n\n\tMIXED_EXPORTS: warnings => {\n\t\ttitle('Mixing named and default exports');\n\t\tinfo(`https://rollupjs.org/guide/en/#outputexports`);\n\t\tstderr(bold('The following entry modules are using named and default exports together:'));\n\t\twarnings.sort((a, b) => (a.id! < b.id! ? -1 : 1));\n\t\tconst displayedWarnings = warnings.length > 5 ? warnings.slice(0, 3) : warnings;\n\t\tfor (const warning of displayedWarnings) {\n\t\t\tstderr(relativeId(warning.id!));\n\t\t}\n\t\tif (displayedWarnings.length < warnings.length) {\n\t\t\tstderr(`...and ${warnings.length - displayedWarnings.length} other entry modules`);\n\t\t}\n\t\tstderr(\n\t\t\t`\\nConsumers of your bundle will have to use chunk['default'] to access their default export, which may not be what you want. Use \\`output.exports: 'named'\\` to disable this warning`\n\t\t);\n\t},\n\n\tNAMESPACE_CONFLICT(warnings) {\n\t\ttitle(`Conflicting re-exports`);\n\t\tfor (const warning of warnings) {\n\t\t\tstderr(\n\t\t\t\t`\"${bold(relativeId(warning.reexporter!))}\" re-exports \"${\n\t\t\t\t\twarning.name\n\t\t\t\t}\" from both \"${relativeId(warning.sources![0])}\" and \"${relativeId(\n\t\t\t\t\twarning.sources![1]\n\t\t\t\t)}\" (will be ignored)`\n\t\t\t);\n\t\t}\n\t},\n\n\tNON_EXISTENT_EXPORT(warnings) {\n\t\ttitle(`Import of non-existent ${warnings.length > 1 ? 'exports' : 'export'}`);\n\t\tshowTruncatedWarnings(warnings);\n\t},\n\n\tPLUGIN_WARNING(warnings) {\n\t\tconst nestedByPlugin = nest(warnings, 'plugin');\n\n\t\tfor (const { key: plugin, items } of nestedByPlugin) {\n\t\t\tconst nestedByMessage = nest(items, 'message');\n\n\t\t\tlet lastUrl = '';\n\n\t\t\tfor (const { key: message, items } of nestedByMessage) {\n\t\t\t\ttitle(`Plugin ${plugin}: ${message}`);\n\t\t\t\tfor (const warning of items) {\n\t\t\t\t\tif (warning.url && warning.url !== lastUrl) info((lastUrl = warning.url));\n\n\t\t\t\t\tconst id = warning.id || warning.loc?.file;\n\t\t\t\t\tif (id) {\n\t\t\t\t\t\tlet loc = relativeId(id);\n\t\t\t\t\t\tif (warning.loc) {\n\t\t\t\t\t\t\tloc += `: (${warning.loc.line}:${warning.loc.column})`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstderr(bold(loc));\n\t\t\t\t\t}\n\t\t\t\t\tif (warning.frame) info(warning.frame);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tSOURCEMAP_BROKEN(warnings) {\n\t\ttitle(`Broken sourcemap`);\n\t\tinfo('https://rollupjs.org/guide/en/#warning-sourcemap-is-likely-to-be-incorrect');\n\n\t\tconst plugins = [\n\t\t\t...new Set(warnings.map(warning => warning.plugin).filter(Boolean))\n\t\t] as string[];\n\t\tstderr(\n\t\t\t`Plugins that transform code (such as ${printQuotedStringList(\n\t\t\t\tplugins\n\t\t\t)}) should generate accompanying sourcemaps`\n\t\t);\n\t},\n\n\tTHIS_IS_UNDEFINED(warnings) {\n\t\ttitle('`this` has been rewritten to `undefined`');\n\t\tinfo('https://rollupjs.org/guide/en/#error-this-is-undefined');\n\t\tshowTruncatedWarnings(warnings);\n\t},\n\n\tUNRESOLVED_IMPORT(warnings) {\n\t\ttitle('Unresolved dependencies');\n\t\tinfo('https://rollupjs.org/guide/en/#warning-treating-module-as-external-dependency');\n\n\t\tconst dependencies = new Map();\n\t\tfor (const warning of warnings) {\n\t\t\tgetOrCreate(dependencies, warning.source, () => []).push(warning.importer);\n\t\t}\n\n\t\tfor (const dependency of dependencies.keys()) {\n\t\t\tconst importers = dependencies.get(dependency);\n\t\t\tstderr(`${bold(dependency)} (imported by ${importers.join(', ')})`);\n\t\t}\n\t},\n\n\tUNUSED_EXTERNAL_IMPORT(warnings) {\n\t\ttitle('Unused external imports');\n\t\tfor (const warning of warnings) {\n\t\t\tstderr(\n\t\t\t\twarning.names +\n\t\t\t\t\t' imported from external module \"' +\n\t\t\t\t\twarning.source +\n\t\t\t\t\t'\" but never used in ' +\n\t\t\t\t\tprintQuotedStringList((warning.sources as string[]).map(id => relativeId(id)))\n\t\t\t);\n\t\t}\n\t}\n};\n\nfunction title(str: string): void {\n\tstderr(bold(yellow(`(!) ${str}`)));\n}\n\nfunction info(url: string): void {\n\tstderr(gray(url));\n}\n\ninterface Nested<T> {\n\titems: T[];\n\tkey: string;\n}\n\nfunction nest<T extends Record<string, any>>(array: readonly T[], prop: string): Nested<T>[] {\n\tconst nested: Nested<T>[] = [];\n\tconst lookup = new Map<string, Nested<T>>();\n\n\tfor (const item of array) {\n\t\tconst key = item[prop];\n\t\tgetOrCreate(lookup, key, () => {\n\t\t\tconst items = {\n\t\t\t\titems: [],\n\t\t\t\tkey\n\t\t\t};\n\t\t\tnested.push(items);\n\t\t\treturn items;\n\t\t}).items.push(item);\n\t}\n\n\treturn nested;\n}\n\nfunction showTruncatedWarnings(warnings: readonly RollupWarning[]): void {\n\tconst nestedByModule = nest(warnings, 'id');\n\n\tconst displayedByModule = nestedByModule.length > 5 ? nestedByModule.slice(0, 3) : nestedByModule;\n\tfor (const { key: id, items } of displayedByModule) {\n\t\tstderr(bold(relativeId(id)));\n\t\tstderr(gray(items[0].frame!));\n\n\t\tif (items.length > 1) {\n\t\t\tstderr(`...and ${items.length - 1} other ${items.length > 2 ? 'occurrences' : 'occurrence'}`);\n\t\t}\n\t}\n\n\tif (nestedByModule.length > displayedByModule.length) {\n\t\tstderr(`\\n...and ${nestedByModule.length - displayedByModule.length} other files`);\n\t}\n}\n","import process from 'process';\nimport type { Plugin } from '../../src/rollup/types';\n\nexport const stdinName = '-';\n\nlet stdinResult: Promise<string> | null = null;\n\nexport function stdinPlugin(arg: unknown): Plugin {\n\tconst suffix = typeof arg == 'string' && arg.length ? '.' + arg : '';\n\treturn {\n\t\tload(id) {\n\t\t\tif (id === stdinName || id.startsWith(stdinName + '.')) {\n\t\t\t\treturn stdinResult || (stdinResult = readStdin());\n\t\t\t}\n\t\t},\n\t\tname: 'stdin',\n\t\tresolveId(id) {\n\t\t\tif (id === stdinName) {\n\t\t\t\treturn id + suffix;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction readStdin(): Promise<string> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst chunks: Buffer[] = [];\n\t\tprocess.stdin.setEncoding('utf8');\n\t\tprocess.stdin\n\t\t\t.on('data', chunk => chunks.push(chunk))\n\t\t\t.on('end', () => {\n\t\t\t\tconst result = chunks.join('');\n\t\t\t\tresolve(result);\n\t\t\t})\n\t\t\t.on('error', err => {\n\t\t\t\treject(err);\n\t\t\t});\n\t});\n}\n","import type { PluginContext } from 'rollup';\nimport type { NormalizedInputOptions, Plugin } from '../../src/rollup/types';\nimport { bold } from '../../src/utils/colors';\nimport { stderr } from '../logging';\n\nexport function waitForInputPlugin(): Plugin {\n\treturn {\n\t\tasync buildStart(this: PluginContext, options: NormalizedInputOptions) {\n\t\t\tconst inputSpecifiers = Array.isArray(options.input)\n\t\t\t\t? options.input\n\t\t\t\t: Object.keys(options.input);\n\n\t\t\tlet lastAwaitedSpecifier: string | null = null;\n\t\t\tcheckSpecifiers: while (true) {\n\t\t\t\tfor (const specifier of inputSpecifiers) {\n\t\t\t\t\tif ((await this.resolve(specifier)) === null) {\n\t\t\t\t\t\tif (lastAwaitedSpecifier !== specifier) {\n\t\t\t\t\t\t\tstderr(`waiting for input ${bold(specifier)}...`);\n\t\t\t\t\t\t\tlastAwaitedSpecifier = specifier;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 500));\n\t\t\t\t\t\tcontinue checkSpecifiers;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tname: 'wait-for-input'\n\t};\n}\n","import { resolve } from 'path';\nimport type { InputOptions } from '../../src/rollup/types';\nimport { stdinPlugin } from './stdin';\nimport { waitForInputPlugin } from './waitForInput';\n\nexport async function addCommandPluginsToInputOptions(\n\tinputOptions: InputOptions,\n\tcommand: Record<string, unknown>\n): Promise<void> {\n\tif (command.stdin !== false) {\n\t\tinputOptions.plugins!.push(stdinPlugin(command.stdin));\n\t}\n\tif (command.waitForBundleInput === true) {\n\t\tinputOptions.plugins!.push(waitForInputPlugin());\n\t}\n\tawait addPluginsFromCommandOption(command.plugin, inputOptions);\n}\n\nexport async function addPluginsFromCommandOption(\n\tcommandPlugin: unknown,\n\tinputOptions: InputOptions\n): Promise<void> {\n\tif (commandPlugin) {\n\t\tconst plugins = Array.isArray(commandPlugin) ? commandPlugin : [commandPlugin];\n\t\tfor (const plugin of plugins) {\n\t\t\tif (/[={}]/.test(plugin)) {\n\t\t\t\t// -p plugin=value\n\t\t\t\t// -p \"{transform(c,i){...}}\"\n\t\t\t\tawait loadAndRegisterPlugin(inputOptions, plugin);\n\t\t\t} else {\n\t\t\t\t// split out plugins joined by commas\n\t\t\t\t// -p node-resolve,commonjs,buble\n\t\t\t\tfor (const p of plugin.split(',')) {\n\t\t\t\t\tawait loadAndRegisterPlugin(inputOptions, p);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nasync function loadAndRegisterPlugin(\n\tinputOptions: InputOptions,\n\tpluginText: string\n): Promise<void> {\n\tlet plugin: any = null;\n\tlet pluginArg: any = undefined;\n\tif (pluginText[0] === '{') {\n\t\t// -p \"{transform(c,i){...}}\"\n\t\tplugin = new Function('return ' + pluginText);\n\t} else {\n\t\tconst match = pluginText.match(/^([@./\\\\\\w|^{}-]+)(=(.*))?$/);\n\t\tif (match) {\n\t\t\t// -p plugin\n\t\t\t// -p plugin=arg\n\t\t\tpluginText = match[1];\n\t\t\tpluginArg = new Function('return ' + match[3])();\n\t\t} else {\n\t\t\tthrow new Error(`Invalid --plugin argument format: ${JSON.stringify(pluginText)}`);\n\t\t}\n\t\tif (!/^\\.|^rollup-plugin-|[@/\\\\]/.test(pluginText)) {\n\t\t\t// Try using plugin prefix variations first if applicable.\n\t\t\t// Prefix order is significant - left has higher precedence.\n\t\t\tfor (const prefix of ['@rollup/plugin-', 'rollup-plugin-']) {\n\t\t\t\ttry {\n\t\t\t\t\tplugin = await requireOrImport(prefix + pluginText);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch {\n\t\t\t\t\t// if this does not work, we try requiring the actual name below\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!plugin) {\n\t\t\ttry {\n\t\t\t\tif (pluginText[0] == '.') pluginText = resolve(pluginText);\n\t\t\t\tplugin = await requireOrImport(pluginText);\n\t\t\t} catch (err: any) {\n\t\t\t\tthrow new Error(`Cannot load plugin \"${pluginText}\": ${err.message}.`);\n\t\t\t}\n\t\t}\n\t}\n\t// some plugins do not use `module.exports` for their entry point,\n\t// in which case we try the named default export and the plugin name\n\tif (typeof plugin === 'object') {\n\t\tplugin = plugin.default || plugin[getCamelizedPluginBaseName(pluginText)];\n\t}\n\tif (!plugin) {\n\t\tthrow new Error(\n\t\t\t`Cannot find entry for plugin \"${pluginText}\". The plugin needs to export a function either as \"default\" or \"${getCamelizedPluginBaseName(\n\t\t\t\tpluginText\n\t\t\t)}\" for Rollup to recognize it.`\n\t\t);\n\t}\n\tinputOptions.plugins!.push(\n\t\ttypeof plugin === 'function' ? plugin.call(plugin, pluginArg) : plugin\n\t);\n}\n\nfunction getCamelizedPluginBaseName(pluginText: string): string {\n\treturn (pluginText.match(/(@rollup\\/plugin-|rollup-plugin-)(.+)$/)?.[2] || pluginText)\n\t\t.split(/[\\\\/]/)\n\t\t.slice(-1)[0]\n\t\t.split('.')[0]\n\t\t.split('-')\n\t\t.map((part, index) => (index === 0 || !part ? part : part[0].toUpperCase() + part.slice(1)))\n\t\t.join('');\n}\n\nasync function requireOrImport(pluginPath: string): Promise<any> {\n\ttry {\n\t\treturn require(pluginPath);\n\t} catch {\n\t\treturn import(pluginPath);\n\t}\n}\n","import { promises as fs } from 'fs';\nimport { extname, isAbsolute } from 'path';\nimport { version } from 'process';\nimport { pathToFileURL } from 'url';\nimport * as rollup from '../../src/node-entry';\nimport type { MergedRollupOptions } from '../../src/rollup/types';\nimport { bold } from '../../src/utils/colors';\nimport { error } from '../../src/utils/error';\nimport { mergeOptions } from '../../src/utils/options/mergeOptions';\nimport type { GenericConfigObject } from '../../src/utils/options/options';\nimport relativeId from '../../src/utils/relativeId';\nimport { stderr } from '../logging';\nimport batchWarnings, { type BatchWarnings } from './batchWarnings';\nimport { addCommandPluginsToInputOptions, addPluginsFromCommandOption } from './commandPlugins';\n\nfunction supportsNativeESM(): boolean {\n\treturn Number(/^v(\\d+)/.exec(version)![1]) >= 13;\n}\n\ninterface NodeModuleWithCompile extends NodeModule {\n\t_compile(code: string, filename: string): any;\n}\n\nexport default async function loadAndParseConfigFile(\n\tfileName: string,\n\tcommandOptions: any = {}\n): Promise<{ options: MergedRollupOptions[]; warnings: BatchWarnings }> {\n\tconst configs = await loadConfigFile(fileName, commandOptions);\n\tconst warnings = batchWarnings();\n\ttry {\n\t\tconst normalizedConfigs: MergedRollupOptions[] = [];\n\t\tfor (const config of configs) {\n\t\t\tconst options = mergeOptions(config, commandOptions, warnings.add);\n\t\t\tawait addCommandPluginsToInputOptions(options, commandOptions);\n\t\t\tnormalizedConfigs.push(options);\n\t\t}\n\t\treturn { options: normalizedConfigs, warnings };\n\t} catch (err) {\n\t\twarnings.flush();\n\t\tthrow err;\n\t}\n}\n\nasync function loadConfigFile(\n\tfileName: string,\n\tcommandOptions: Record<string, unknown>\n): Promise<GenericConfigObject[]> {\n\tconst extension = extname(fileName);\n\n\tconst configFileExport =\n\t\tcommandOptions.configPlugin ||\n\t\t!(extension === '.cjs' || (extension === '.mjs' && supportsNativeESM()))\n\t\t\t? await getDefaultFromTranspiledConfigFile(fileName, commandOptions)\n\t\t\t: extension === '.cjs'\n\t\t\t? getDefaultFromCjs(require(fileName))\n\t\t\t: (await import(pathToFileURL(fileName).href)).default;\n\n\treturn getConfigList(configFileExport, commandOptions);\n}\n\nfunction getDefaultFromCjs(namespace: GenericConfigObject): unknown {\n\treturn namespace.__esModule ? namespace.default : namespace;\n}\n\nasync function getDefaultFromTranspiledConfigFile(\n\tfileName: string,\n\tcommandOptions: Record<string, unknown>\n): Promise<unknown> {\n\tconst warnings = batchWarnings();\n\tconst inputOptions = {\n\t\texternal: (id: string) =>\n\t\t\t(id[0] !== '.' && !isAbsolute(id)) || id.slice(-5, id.length) === '.json',\n\t\tinput: fileName,\n\t\tonwarn: warnings.add,\n\t\tplugins: [],\n\t\ttreeshake: false\n\t};\n\tawait addPluginsFromCommandOption(commandOptions.configPlugin, inputOptions);\n\tconst bundle = await rollup.rollup(inputOptions);\n\tif (!commandOptions.silent && warnings.count > 0) {\n\t\tstderr(bold(`loaded ${relativeId(fileName)} with warnings`));\n\t\twarnings.flush();\n\t}\n\tconst {\n\t\toutput: [{ code }]\n\t} = await bundle.generate({\n\t\texports: 'named',\n\t\tformat: 'cjs',\n\t\tplugins: [\n\t\t\t{\n\t\t\t\tname: 'transpile-import-meta',\n\t\t\t\tresolveImportMeta(property, { moduleId }) {\n\t\t\t\t\tif (property === 'url') {\n\t\t\t\t\t\treturn `'${pathToFileURL(moduleId).href}'`;\n\t\t\t\t\t}\n\t\t\t\t\tif (property == null) {\n\t\t\t\t\t\treturn `{url:'${pathToFileURL(moduleId).href}'}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t});\n\treturn loadConfigFromBundledFile(fileName, code);\n}\n\nasync function loadConfigFromBundledFile(fileName: string, bundledCode: string): Promise<unknown> {\n\tconst resolvedFileName = await fs.realpath(fileName);\n\tconst extension = extname(resolvedFileName);\n\tconst defaultLoader = require.extensions[extension];\n\trequire.extensions[extension] = (module: NodeModule, requiredFileName: string) => {\n\t\tif (requiredFileName === resolvedFileName) {\n\t\t\t(module as NodeModuleWithCompile)._compile(bundledCode, requiredFileName);\n\t\t} else {\n\t\t\tdefaultLoader(module, requiredFileName);\n\t\t}\n\t};\n\tdelete require.cache[resolvedFileName];\n\ttry {\n\t\tconst config = getDefaultFromCjs(require(fileName));\n\t\trequire.extensions[extension] = defaultLoader;\n\t\treturn config;\n\t} catch (err: any) {\n\t\tif (err.code === 'ERR_REQUIRE_ESM') {\n\t\t\treturn error({\n\t\t\t\tcode: 'TRANSPILED_ESM_CONFIG',\n\t\t\t\tmessage: `While loading the Rollup configuration from \"${relativeId(\n\t\t\t\t\tfileName\n\t\t\t\t)}\", Node tried to require an ES module from a CommonJS file, which is not supported. A common cause is if there is a package.json file with \"type\": \"module\" in the same folder. You can try to fix this by changing the extension of your configuration file to \".cjs\" or \".mjs\" depending on the content, which will prevent Rollup from trying to preprocess the file but rather hand it to Node directly.`,\n\t\t\t\turl: 'https://rollupjs.org/guide/en/#using-untranspiled-config-files'\n\t\t\t});\n\t\t}\n\t\tthrow err;\n\t}\n}\n\nasync function getConfigList(configFileExport: any, commandOptions: any): Promise<any[]> {\n\tconst config = await (typeof configFileExport === 'function'\n\t\t? configFileExport(commandOptions)\n\t\t: configFileExport);\n\tif (Object.keys(config).length === 0) {\n\t\treturn error({\n\t\t\tcode: 'MISSING_CONFIG',\n\t\t\tmessage: 'Config file must export an options object, or an array of options objects',\n\t\t\turl: 'https://rollupjs.org/guide/en/#configuration-files'\n\t\t});\n\t}\n\treturn Array.isArray(config) ? config : [config];\n}\n"],"names":["tty","env","process","relativeId","getOrCreate","printQuotedStringList","resolve","version","mergeOptions","extname","pathToFileURL","isAbsolute","rollup.rollup","fs","error"],"mappings":"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"}